<!DOCTYPE html>
<html>

<head>
    <!-- this is what shows up in the browser tab-->
    <title>Annazon.com</title>

    <!--this links to the css file-->
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <main>
        <img src="resources/annazon-logo.jpg"
            class="logo">
        <img src="resources/arrows.gif" class="arrows">

        <div id="responseField">

        </div>
    </main>


    <script>

        const linksUrl = "https://giancarlozaniolo.github.io/annazon/resources/links.txt";

        let button;
        getLinks();

        async function getLinks() {
            const linksResponse = await fetch(linksUrl);
            const linksTxt = await linksResponse.text();

            const linksArray = linksTxt.split('\n');
            generateButton(linksArray[Math.floor(Math.random() * linksArray.length)]);
            button = document.querySelector('#button');
            button.addEventListener("click", buttonClicked);
        }

        function generateButton(link) {
            while (responseField.firstChild) {
                responseField.removeChild(responseField.firstChild);
            }

            responseField.innerHTML = `<div class = "buttonFrame"><a href = "${link}" id = "button" target="_blank">What kinds of things\ndoes Anna like\nto buy on Amazon?</a></div>`;

        }

        function buttonClicked(event) {
            getLinks();
        }

    </script>

</body>

</html>
